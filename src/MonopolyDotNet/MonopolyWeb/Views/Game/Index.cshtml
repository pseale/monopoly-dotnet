@model MonopolyWeb.Models.ViewModels.GameStatusViewModel

@using Microsoft.Web.Mvc
@using MonopolyWeb.Controllers
@{
  ViewBag.Title = "Your turn";
}

@section styles
{
  <style>
  .monopoly-board {
      height: 720px;
      width: 720px;
      background-image: url('@Url.Content("~/img/board.png")');
      background-position: center center;
      position: relative;
    }
    .player-card {
      height: 160px;
    }

    .cash {

    }

    img.player-icon {
      float: left;
      padding: 3px;
    }

    img.player-totem {
      float: right;
      vertical-align: bottom;
    }

    @foreach (var player in Model.PlayerStatuses) {
      
    <text>    img#player-@(player.PlayerNumber) {
      position: absolute;
      left: @(player.OffsetFromLeft)px;
      top: @(player.OffsetFromTop)px;
    }</text>

    } 

    .holdings {
      
    }
  </style>  
}

<div class="monopoly-board span9">
  <img class="player-totem" id="player-1" src="~/img/dog.png" />
  <img class="player-totem" id="player-2" src="~/img/horseman.png" />
  <img class="player-totem" id="player-3" src="~/img/thimble.png" />
  <img class="player-totem" id="player-4" src="~/img/shoe.png" />
</div>
@foreach (var player in Model.PlayerStatuses)
{
  <div class="player-card span3" id="player-@(player.PlayerNumber)">
    <img class="player-icon" src="~/img/@(@player.Icon)" />
    <h4>@player.Name</h4>
    <div class="cash">@player.Cash</div>
    @(Html.ListBoxFor(x => x.PlayerStatuses[0].Holdings, player.Holdings, new { @class = "holdings" }))
  </div>
} 
<div class="span3">
  @using (Html.BeginForm<GameController>(x=>x.Roll()))
  {
    <input class="btn btn-large" type="submit" value="Roll" />
  }
  @if (Model.CanBuyProperty)
  {
    using (Html.BeginForm<GameController>(x => x.BuyProperty()))
    {
      <input class="btn btn-large" type="submit" value="Buy (@(Model.PropertySalePrice))" />
    }
  }
</div>